(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{468:function(t,s,e){"use strict";e.r(s);var a=e(2),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"_1-linux-文件-io-函数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-linux-文件-io-函数"}},[t._v("#")]),t._v(" 1. Linux 文件 IO 函数")]),t._v(" "),e("blockquote",[e("p",[t._v("🚀 在 linux 下面如果想要对文件进行操作，可以通过以下的函数实现。")]),t._v(" "),e("p",[t._v("（1）open / close：打开或关闭一个文件")]),t._v(" "),e("p",[t._v("（2）read：从文件里读取数据")]),t._v(" "),e("p",[t._v("（3）write：向文件写数据")]),t._v(" "),e("p",[t._v("（4）lseek：对文件光标进行重定位")])]),t._v(" "),e("h3",{attrs:{id:"_1-1-open"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-open"}},[t._v("#")]),t._v(" 1.1 open")]),t._v(" "),e("blockquote",[e("p",[t._v("📌 用来打开一个文件")])]),t._v(" "),e("div",{staticClass:"language-c line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-c"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("pathname"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" flags"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("ul",[e("li",[t._v("include：\n"),e("ul",[e("li",[e("code",[t._v("#include <sys/types.h>")])]),t._v(" "),e("li",[e("code",[t._v("#include <sys/stat.h>")])]),t._v(" "),e("li",[e("code",[t._v("#include <fcntl.h>")])])])]),t._v(" "),e("li",[t._v("pathname：要打开或创建的文件名（带路径名）")]),t._v(" "),e("li",[t._v("flags：打开标志。告诉系统，是以何种方式打开这个文件\n"),e("ul",[e("li",[e("code",[t._v("O_RDONLY")]),t._v("：read only")]),t._v(" "),e("li",[e("code",[t._v("O_WRONLY")]),t._v("：write only")]),t._v(" "),e("li",[e("code",[t._v("O_RDWR")]),t._v("：read / write")])])]),t._v(" "),e("li",[t._v("return：返回值类型为"),e("code",[t._v("int")]),t._v(" "),e("ul",[e("li",[t._v("如果成功返回文件描述符（＞ 0，后续所有对文件的操作都必须通过它，因为它代表这个文件。）")]),t._v(" "),e("li",[t._v("失败返回－1，并且 errno 被设置")])])])]),t._v(" "),e("h3",{attrs:{id:"_1-2-close"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-close"}},[t._v("#")]),t._v(" 1.2 close")]),t._v(" "),e("blockquote",[e("p",[t._v("📌 用来关闭一个文件描述符")])]),t._v(" "),e("div",{staticClass:"language-c line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-c"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" fd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("ul",[e("li",[t._v("头 include：\n"),e("ul",[e("li",[e("code",[t._v("#include <unistd.h>")])])])]),t._v(" "),e("li",[t._v("fd：要关闭的那个文件的文件描述符")]),t._v(" "),e("li",[t._v("return：返回值类型为"),e("code",[t._v("int")]),t._v(" "),e("ul",[e("li",[t._v("成功返回 0")]),t._v(" "),e("li",[t._v("失败返回－1")])])])]),t._v(" "),e("h3",{attrs:{id:"_1-3-read"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-read"}},[t._v("#")]),t._v(" 1.3 read")]),t._v(" "),e("blockquote",[e("p",[t._v("📌 用来从 fd 指定的文件中读取 nbyte 哥字节数剧到 buff 指向的空间中去。同时文件光标往后移")])]),t._v(" "),e("div",{staticClass:"language-c line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-c"}},[e("code",[t._v("ssize_t "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("read")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" fd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("buf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" size_t nbyte"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("ul",[e("li",[t._v("include：\n"),e("ul",[e("li",[e("code",[t._v("#include <unistd.h>")])])])]),t._v(" "),e("li",[t._v("fd：从文件描述符（open 返回值），表示从哪个文件里面读")]),t._v(" "),e("li",[t._v("buf：一个指针，指向一段内存，用来保存从文件里面读到的数据")]),t._v(" "),e("li",[t._v("nbyte：读多少字节数据")]),t._v(" "),e("li",[t._v("return：返回值类型为 ssize_t\n"),e("ul",[e("li",[t._v("＞ 0：成功读取到的字节数，文件偏移量（光标）随之增加")]),t._v(" "),e("li",[t._v("＝ 0：到达文件尾（文件结束）")]),t._v(" "),e("li",[t._v("－1：出错，同时 errno 被设置")])])])]),t._v(" "),e("h3",{attrs:{id:"_1-4-write"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-write"}},[t._v("#")]),t._v(" 1.4 write")]),t._v(" "),e("blockquote",[e("p",[t._v("📌 用来把 buf 指向的内存空间中至多 nbyte 个字节数据写到 fd 指定的文件中去。同时文件光标往后移")])]),t._v(" "),e("div",{staticClass:"language-c line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-c"}},[e("code",[t._v("ssize_t "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" fd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("buf"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" size_t nbyte"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("ul",[e("li",[t._v("include：\n"),e("ul",[e("li",[e("code",[t._v("#include <unistd.h>")])])])]),t._v(" "),e("li",[t._v("fd：文件描述符（open 返回值），表示写到哪个文件中去")]),t._v(" "),e("li",[t._v("buf：指针，指向要写到文件中去的数据")]),t._v(" "),e("li",[t._v("nbyte：写多少字节")]),t._v(" "),e("li",[t._v("return：\n"),e("ul",[e("li",[t._v("＞ 0：成功写到文件中去的字节数，文件偏移量随之增加")]),t._v(" "),e("li",[t._v("＝ 0：什么也没有写")]),t._v(" "),e("li",[t._v("－1：出错，同时 errno 被设置")])])])]),t._v(" "),e("h3",{attrs:{id:"_1-5-lseek"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-lseek"}},[t._v("#")]),t._v(" 1.5 lseek")]),t._v(" "),e("blockquote",[e("p",[t._v("📌 用来给指定文件定位光标（设置偏移量）")])]),t._v(" "),e("div",{staticClass:"language-c line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-c"}},[e("code",[t._v("off_t "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("lseek")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" fd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" off_t offset"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" wheence"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br")])]),e("ul",[e("li",[t._v("include：\n"),e("ul",[e("li",[e("code",[t._v("#include <sys/types.h>")])]),t._v(" "),e("li",[e("code",[t._v("#include <unistd.h>")])])])]),t._v(" "),e("li",[t._v("fd：文件描述符，要定位的文件")]),t._v(" "),e("li",[t._v("offset：要设置的偏移量")]),t._v(" "),e("li",[t._v("whence：定位方式，有三种\n"),e("ul",[e("li",[e("code",[t._v("SEEK_SET")]),t._v("：基于文件开头定位\n"),e("ul",[e("li",[t._v("新的光标位置为＝文件开头＋ offset（不能＜ 0）")])])]),t._v(" "),e("li",[e("code",[t._v("SEEK_CUR")]),t._v("：基于当前光标位置定位\n"),e("ul",[e("li",[t._v("新的光标位置为＝当前位置＋ offset（可正可负）")])])]),t._v(" "),e("li",[e("code",[t._v("SEEK_END")]),t._v("：基于文件末尾定位\n"),e("ul",[e("li",[t._v("新的光标位置为＝文件末尾＋ offset（可正可负）")])])])])]),t._v(" "),e("li",[t._v("return：\n"),e("ul",[e("li",[t._v("成功返回新的光标位置相对于文件开头的偏移量（以字节为单位）")]),t._v(" "),e("li",[t._v("失败返回－1")])])])])])}),[],!1,null,null,null);s.default=n.exports}}]);